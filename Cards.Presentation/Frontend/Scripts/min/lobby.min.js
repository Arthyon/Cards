$(function(){function n(n){var a=$("#games"),o=$('<li id="'+n.Id+'" onclick="">'+n.GameType+', players: <span class="players">'+n.CurrentPlayers+"</span>/"+n.MaxPlayers+"</li>");o.on("click",function(){e(n.Id,n.GameType)}),a.append(o)}function e(n,e){var a=$.connection[e];a.server.joinGame(n).done(function(){window.location.href="/Home/Game"}).fail(function(){alert("failed")})}var a=$.connection.LobbyHub,o="/api/LobbyApi/";a.client.addGameToList=n,a.client.updatePlayerCount=function(n,e){$("#"+n+" .players","#games").text(e)},a.client.playersChanged=function(n){$("#playerCount").text(n)},$.connection.hub.start().done(function(){$.getJSON(o+"GetAvailableGameTypes").done(function(n){$.each(n,function(n,e){var a=$("<button>"+e+"</button>");a.appendTo($("#gameTypes")),a.on("click",function(){var n=$.connection[e];n.server.createGame().done(function(){window.location.href="/Home/Game"}).fail(function(){alert("Fail")})})})}),$.getJSON(o+"GetAvailableGames").done(function(e){$.each(e,function(e,a){n(a)})})})});